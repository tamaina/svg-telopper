!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="js/",r(r.s=3)}([function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(s=t[u])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o};Object.defineProperty(e,"__esModule",{value:!0});const s=r(5);class i{constructor(){this.isOptional=!1,this.isNullable=!1,this.validators=[]}push(t,e){t.toString=e?()=>e:()=>null,this.validators.push(t)}exec(t,e){function r(t,r){return e?[t,r]:r}if(this.isOptional&&void 0===t)return r(t,null);if(this.isNullable&&null===t)return r(t,null);if(!this.isOptional&&void 0===t)return r(null,new Error("must-be-not-undefined"));if(!this.isNullable&&null===t)return r(null,new Error("must-be-not-null"));let n=null;return this.validators.some(e=>{const r=e(t);return!1===r?(n=new Error("something-happened"),!0):r instanceof Error&&(n=r,!0)}),r(t,n)}throw(t){const[e,r]=this.exec(t,!0);if(r)throw r;return e}test(t){return this.exec(t)}ok(t){return null==this.test(t)}nok(t){return!this.ok(t)}get(t){return this.exec(t,!0)}pipe(t){return this.push(t,"pipe"),this}note(t){return this.data=t,this}get optional(){return this.isOptional=!0,this}get nullable(){return this.isNullable=!0,this}toString(t=!1){return this.constructor.name+" "+(t?`(${this.validators.map(t=>t.toString()||"[anonymous]").join(" > ")})`:`(${this.validators.map(t=>t.toString()).filter(t=>null!=t).join(" > ")})`)}getType(t="unknown"){return this.isNullable&&this.isOptional?`(${t} | null)?`:this.isNullable&&!this.isOptional?`(${t} | null)`:!this.isNullable&&this.isOptional?`${t}?`:t}}n([s.default],i.prototype,"push",null),n([s.default],i.prototype,"exec",null),n([s.default],i.prototype,"throw",null),n([s.default],i.prototype,"test",null),n([s.default],i.prototype,"ok",null),n([s.default],i.prototype,"nok",null),n([s.default],i.prototype,"get",null),n([s.default],i.prototype,"pipe",null),n([s.default],i.prototype,"note",null),n([s.default],i.prototype,"toString",null),e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4);e.AnyContext=n.default;const s=r(6);e.ArrayContext=s.default;const i=r(7);e.BooleanContext=i.default;const o=r(8);e.NumberContext=o.default;const u=r(9);e.ObjectContext=u.default;const a=r(10);e.StringContext=a.default;const l=r(11);e.OrContext=l.default;const c=r(0);e.Context=c.default,e.default={get any(){return new n.default},arr:t=>new s.default(t),array:t=>new s.default(t),get bool(){return new i.default},get boolean(){return new i.default},get num(){return new o.default},get number(){return new o.default},obj:t=>new u.default(t),object:t=>new u.default(t),or:(t,e)=>new l.default(t,e),get str(){return new a.default},get string(){return new a.default},type:t=>new t,use:t=>(new n.default).pipe(t.test)}},function(t,e,r){"use strict";const n=r(12),s=r(13);function i(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function o(t,e){return e.decode?s(t):t}function u(t){const e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function a(t,e){const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return(t,r,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e=Object.assign({decode:!0,arrayFormat:"none"},e)),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const s of t.split("&")){let[t,i]=s.replace(/\+/g," ").split("=");i=void 0===i?null:o(i,e),r(o(t,e),i,n)}return Object.keys(n).sort().reduce((t,e)=>{const r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(r):t[e]=r,t},Object.create(null))}e.extract=u,e.parse=a,e.stringify=((t,e)=>{if(!t)return"";const r=function(t){switch(t.arrayFormat){case"index":return(e,r,n)=>null===r?[i(e,t),"[",n,"]"].join(""):[i(e,t),"[",i(n,t),"]=",i(r,t)].join("");case"bracket":return(e,r)=>null===r?[i(e,t),"[]"].join(""):[i(e,t),"[]=",i(r,t)].join("");default:return(e,r)=>null===r?i(e,t):[i(e,t),"=",i(r,t)].join("")}}(e=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},e)),n=Object.keys(t);return!1!==e.sort&&n.sort(e.sort),n.map(n=>{const s=t[n];if(void 0===s)return"";if(null===s)return i(n,e);if(Array.isArray(s)){const t=[];for(const e of s.slice())void 0!==e&&t.push(r(n,e,t.length));return t.join("&")}return i(n,e)+"="+i(s,e)}).filter(t=>t.length>0).join("&")}),e.parseUrl=((t,e)=>{const r=t.indexOf("#");return-1!==r&&(t=t.slice(0,r)),{url:t.split("?")[0]||"",query:a(u(t),e)}})},function(t,e,r){t.exports=r(14)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.default=class extends n.default{getType(){return super.getType("any")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){const n=r.value||r.get;return{configurable:!0,get(){const t=n.bind(this);return Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t}),t}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.isAnArray=(t=>Array.isArray(t)),e.isNotAnArray=(t=>!e.isAnArray(t));const s=t=>new Set(t).size!==t.length;e.default=class extends n.default{constructor(t){super(),this.ctx=t,this.push(t=>!e.isNotAnArray(t)||new Error("must-be-an-array")),t&&this.each(t)}unique(){return this.push(t=>!s(t)||new Error("must-be-unique"),"unique"),this}range(t,e){return this.min(t),this.max(e),this}min(t){return this.push(e=>!(e.length<t)||new Error("invalid-range"),"min"),this}max(t){return this.push(e=>!(e.length>t)||new Error("invalid-range"),"max"),this}length(t){return this.push(e=>e.length===t||new Error("invalid-length"),"length"),this}item(t,e){const r=e instanceof n.default?e.test:e;return this.push(e=>{const n=r(e[t]);return!1===n?new Error("invalid-item"):!(n instanceof Error)||n},"item"),this}each(t){const e=t instanceof n.default?t.test:t;return this.push(t=>{let r;return t.some((t,n,s)=>{const i=e(t,n,s);return!1===i?(r=new Error("invalid-item"),!0):i instanceof Error&&(r=i,!0)}),r||!0},"each"),this}getType(){return super.getType(this.ctx?this.ctx.getType()+"[]":"array")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.isABoolean=(t=>"boolean"==typeof t),e.isNotABoolean=(t=>!e.isABoolean(t));e.default=class extends n.default{constructor(){super(),this.push(t=>!e.isNotABoolean(t)||new Error("must-be-a-boolean"))}getType(){return super.getType("boolean")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.isANumber=(t=>Number.isFinite(t)),e.isNotANumber=(t=>!e.isANumber(t));e.default=class extends n.default{constructor(){super(),this.push(t=>!e.isNotANumber(t)||new Error("must-be-a-number"))}range(t,e){return this.min(t),this.max(e),this}min(t){return this.push(e=>!(e<t)||new Error("invalid-range"),"min"),this}max(t){return this.push(e=>!(e>t)||new Error("invalid-range"),"max"),this}int(){return this.push(t=>!!Number.isInteger(t)||new Error("must-be-an-intager"),"int"),this}getType(){return super.getType("number")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.isAnObject=(t=>"object"==typeof t&&!(t instanceof Array)),e.isNotAnObject=(t=>!e.isAnObject(t));e.default=class extends n.default{constructor(t){super(),this.isStrict=!1,this.props=t,this.push(t=>!e.isNotAnObject(t)||new Error("must-be-an-object")),t&&Object.entries(t).forEach(([t,e])=>{this.push(r=>e.test(r[t]))}),this.push(e=>{if(this.isStrict){const r=Object.keys(e),n=Object.keys(t);if(r.some(t=>!n.some(e=>e==t)))return new Error("dirty-object")}return!0})}strict(){return this.isStrict=!0,this}getType(){return super.getType("object")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);function s(t){return t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}e.isAString=(t=>"string"==typeof t),e.isNotAString=(t=>!e.isAString(t));e.default=class extends n.default{constructor(){super(),this.push(t=>!e.isNotAString(t)||new Error("must-be-a-string"))}range(t,e){return this.min(t),this.max(e),this}min(t){return this.push(e=>!(s(e).length<t)||new Error("invalid-range"),"min"),this}max(t){return this.push(e=>!(s(e).length>t)||new Error("invalid-range"),"max"),this}length(t){return this.push(e=>s(e).length===t||new Error("invalid-length"),"length"),this}or(t){return"string"==typeof t&&(t=t.split("|")),this.push(e=>!!t.some(t=>t===e)||new Error("not-match-pattern"),"or"),this}notInclude(t){return"string"==typeof t&&(t=[t]),this.push(e=>!t.some(t=>-1!==e.indexOf(t))||new Error("includes-forbidden-string"),"notInclude"),this}match(t){return this.push(e=>!!t.test(e)||new Error("not-match-pattern"),"match"),this}notMatch(t){return this.push(e=>!t.test(e)||new Error("match-pattern"),"notMatch"),this}getType(){return super.getType("string")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.default=class extends n.default{constructor(t,e){super(),this.ctxA=t,this.ctxB=e,this.push(r=>!t.nok(r)||!e.nok(r)||new Error("not match"))}getType(){return super.getType(`(${this.ctxA.getType()} | ${this.ctxB.getType()})`)}}},function(t,e,r){"use strict";t.exports=(t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},function(t,e,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");function i(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],i(r),i(n))}function o(t){try{return decodeURIComponent(t)}catch(s){for(var e=t.match(n),r=1;r<e.length;r++)e=(t=i(e,r).join("")).match(n);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=s.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var n=o(r[0]);n!==r[0]&&(e[r[0]]=n)}r=s.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),u=0;u<i.length;u++){var a=i[u];t=t.replace(new RegExp(a,"g"),e[a])}return t}(t)}}},function(t,e,r){"use strict";r.r(e);var n=r(1),s=r.n(n),i=r(2),o=function(){return Object(i.parse)(location.search)},u=function(t){var e={},r=[];s.a.str.ok(t.text)?e.text=[t.text]:s.a.arr(s.a.str).min(1).ok(t.text)?e.text=t.text:r.push("値'text'が間違っているようです。?text=ひとつめ(&text=ふたつめ&text=みっつめ) のように指定しましょう。"),s.a.str.ok(t.svg)?t.svg.endsWith(".svg")?e.svg=t.svg.slice(0,-4):e.svg=t.svg:r.push("値'svg'が間違っているようです。文字列で指定しましょう。"),s.a.str.ok(t.replace)?e.replace=t.replace:t.replace?r.push("値'replace'が間違っているようです。"):e.replace="ここに文章を入力",t.interval&&s.a.str.ok(t.interval)?e.interval=parseInt(t.interval,10):t.interval||(e.interval=7e3),t.interval&&!e.interval&&r.push("値'interval'が間違っているようです。数値で指定しましょう。"),s.a.str.ok(t.class)?e.class=t.class:t.class&&r.push("値'class'が間違っているようです。");try{e.reverse=a(t.reverse)}catch(t){r.push("値'reverse'が間違っているようです。")}try{e.stretch=a(t.stretch)}catch(t){r.push("値'stretch'が間違っているようです。")}if(r.length>0)throw Error(r.join("\n"));return e};function a(t){if("true"===t)return!0;if("1"===t)return!0;if(""===t)return!0;if(null===t)return!0;if("false"===t)return!1;if("0"===t)return!1;if(t)throw Error("指定された形式ではないようです。")}var l=function(){function t(){this.client=document.getElementById("client");try{this.queries=u(o())}catch(t){this.client.insertAdjacentText("afterbegin",t)}this.insertSvgs()}return t.prototype.insertSvgs=function(){var t=this,e=new Request("./svg/"+this.queries.svg+".svg");return fetch(e).then(function(t){return t.text()}).then(function(e){t.svg=e;for(var r=new RegExp(t.queries.replace,"g"),n=0,s=t.queries.text;n<s.length;n++){var i=s[n];t.client.insertAdjacentHTML("beforeend",'<div class="wrapper">'+e.replace(r,i)+"</div>")}t.subtitles=Array.from(t.client.children);for(var o=t.client.getBoundingClientRect(),u=0,a=t.subtitles;u<a.length;u++){var l=a[u];l.children.item(0).classList.add("show"),t.queries.class&&l.children.item(0).classList.add(t.queries.class);var c=l.getElementsByTagName("g").item(0).getBoundingClientRect(),h=[];console.log(l.getElementsByTagName("g"));var f=o.width/c.width;if(f<1){for(var p=c;p.width>o.width;)p=l.getElementsByTagName("g").item(0).getBoundingClientRect(),f-=.0025,l.style.transform="scaleX("+f+")";h.push("scaleX("+f+")")}else t.queries.stretch&&h.push("scaleX("+f+")");var d=o.height/c.height;if(d<1){for(p=c;p.height>o.height;)p=l.getElementsByTagName("g").item(0).getBoundingClientRect(),d-=.0025,l.style.transform="scaleY("+d+")";h.push("scaleY("+d+")")}else t.queries.stretch&&h.push("scaleY("+d+")");l.style.transform=h.join(" ")}t.subtitles.length>1&&(t.show=t.subtitles.length-1,t.next(),setInterval(t.next.bind(t),t.queries.interval))}).catch(function(e){t.client.insertAdjacentText("afterbegin","SVGの読み込み・挿入に失敗しました。"),t.client.insertAdjacentText("afterbegin",e),console.error(e)})},t.prototype.next=function(){this.show=this.show===this.subtitles.length-1?0:this.show+1,console.log(this.show);for(var t=0;t<this.subtitles.length;t+=1){var e=this.subtitles[t];t===this.show?(e.children.item(0).classList.add("show"),e.style.zIndex=String(1*(this.queries.reverse?-1:1))):(e.children.item(0).classList.remove("show"),e.style.zIndex=String(1*(this.queries.reverse?1:-1)))}},t}();document.addEventListener("DOMContentLoaded",function(){new l})}]);