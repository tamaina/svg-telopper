!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="js/",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4);t.AnyContext=n.default;const s=r(6);t.ArrayContext=s.default;const i=r(7);t.BooleanContext=i.default;const o=r(8);t.NumberContext=o.default;const u=r(9);t.ObjectContext=u.default;const l=r(10);t.StringContext=l.default;const a=r(11);t.OrContext=a.default;const c=r(1);t.Context=c.default,t.default={get any(){return new n.default},arr:e=>new s.default(e),array:e=>new s.default(e),get bool(){return new i.default},get boolean(){return new i.default},get num(){return new o.default},get number(){return new o.default},obj:e=>new u.default(e),object:e=>new u.default(e),or:(e,t)=>new a.default(e,t),get str(){return new l.default},get string(){return new l.default},type:e=>new e,use:e=>(new n.default).pipe(e.test)}},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});const s=r(5);class i{constructor(){this.isOptional=!1,this.isNullable=!1,this.validators=[]}push(e,t){e.toString=t?()=>t:()=>null,this.validators.push(e)}exec(e,t){function r(e,r){return t?[e,r]:r}if(this.isOptional&&void 0===e)return r(e,null);if(this.isNullable&&null===e)return r(e,null);if(!this.isOptional&&void 0===e)return r(null,new Error("must-be-not-undefined"));if(!this.isNullable&&null===e)return r(null,new Error("must-be-not-null"));let n=null;return this.validators.some(t=>{const r=t(e);return!1===r?(n=new Error("something-happened"),!0):r instanceof Error&&(n=r,!0)}),r(e,n)}throw(e){const[t,r]=this.exec(e,!0);if(r)throw r;return t}test(e){return this.exec(e)}ok(e){return null==this.test(e)}nok(e){return!this.ok(e)}get(e){return this.exec(e,!0)}pipe(e){return this.push(e,"pipe"),this}note(e){return this.data=e,this}get optional(){return this.isOptional=!0,this}get nullable(){return this.isNullable=!0,this}toString(e=!1){return this.constructor.name+" "+(e?`(${this.validators.map(e=>e.toString()||"[anonymous]").join(" > ")})`:`(${this.validators.map(e=>e.toString()).filter(e=>null!=e).join(" > ")})`)}getType(e="unknown"){return this.isNullable&&this.isOptional?`(${e} | null)?`:this.isNullable&&!this.isOptional?`(${e} | null)`:!this.isNullable&&this.isOptional?`${e}?`:e}}n([s.default],i.prototype,"push",null),n([s.default],i.prototype,"exec",null),n([s.default],i.prototype,"throw",null),n([s.default],i.prototype,"test",null),n([s.default],i.prototype,"ok",null),n([s.default],i.prototype,"nok",null),n([s.default],i.prototype,"get",null),n([s.default],i.prototype,"pipe",null),n([s.default],i.prototype,"note",null),n([s.default],i.prototype,"toString",null),t.default=i},function(e,t,r){"use strict";const n=r(12),s=r(13);function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function o(e,t){return t.decode?s(e):e}function u(e){const t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=Object.assign({decode:!0,arrayFormat:"none"},t)),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const s of e.split("&")){let[e,i]=s.replace(/\+/g," ").split("=");i=void 0===i?null:o(i,t),r(o(e,t),i,n)}return Object.keys(n).sort().reduce((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=u,t.parse=l,t.stringify=((e,t)=>{if(!e)return"";const r=function(e){switch(e.arrayFormat){case"index":return(t,r,n)=>null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("");case"bracket":return(t,r)=>null===r?[i(t,e),"[]"].join(""):[i(t,e),"[]=",i(r,e)].join("");default:return(t,r)=>null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),n=Object.keys(e);return!1!==t.sort&&n.sort(t.sort),n.map(n=>{const s=e[n];if(void 0===s)return"";if(null===s)return i(n,t);if(Array.isArray(s)){const e=[];for(const t of s.slice())void 0!==t&&e.push(r(n,t,e.length));return e.join("&")}return i(n,t)+"="+i(s,t)}).filter(e=>e.length>0).join("&")}),t.parseUrl=((e,t)=>{const r=e.indexOf("#");return-1!==r&&(e=e.slice(0,r)),{url:e.split("?")[0]||"",query:l(u(e),t)}})},function(e,t,r){e.exports=r(14)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class extends n.default{getType(){return super.getType("any")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){const n=r.value||r.get;return{configurable:!0,get(){const e=n.bind(this);return Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e}),e}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.isAnArray=(e=>Array.isArray(e)),t.isNotAnArray=(e=>!t.isAnArray(e));const s=e=>new Set(e).size!==e.length;t.default=class extends n.default{constructor(e){super(),this.ctx=e,this.push(e=>!t.isNotAnArray(e)||new Error("must-be-an-array")),e&&this.each(e)}unique(){return this.push(e=>!s(e)||new Error("must-be-unique"),"unique"),this}range(e,t){return this.min(e),this.max(t),this}min(e){return this.push(t=>!(t.length<e)||new Error("invalid-range"),"min"),this}max(e){return this.push(t=>!(t.length>e)||new Error("invalid-range"),"max"),this}length(e){return this.push(t=>t.length===e||new Error("invalid-length"),"length"),this}item(e,t){const r=t instanceof n.default?t.test:t;return this.push(t=>{const n=r(t[e]);return!1===n?new Error("invalid-item"):!(n instanceof Error)||n},"item"),this}each(e){const t=e instanceof n.default?e.test:e;return this.push(e=>{let r;return e.some((e,n,s)=>{const i=t(e,n,s);return!1===i?(r=new Error("invalid-item"),!0):i instanceof Error&&(r=i,!0)}),r||!0},"each"),this}getType(){return super.getType(this.ctx?this.ctx.getType()+"[]":"array")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.isABoolean=(e=>"boolean"==typeof e),t.isNotABoolean=(e=>!t.isABoolean(e));t.default=class extends n.default{constructor(){super(),this.push(e=>!t.isNotABoolean(e)||new Error("must-be-a-boolean"))}getType(){return super.getType("boolean")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.isANumber=(e=>Number.isFinite(e)),t.isNotANumber=(e=>!t.isANumber(e));t.default=class extends n.default{constructor(){super(),this.push(e=>!t.isNotANumber(e)||new Error("must-be-a-number"))}range(e,t){return this.min(e),this.max(t),this}min(e){return this.push(t=>!(t<e)||new Error("invalid-range"),"min"),this}max(e){return this.push(t=>!(t>e)||new Error("invalid-range"),"max"),this}int(){return this.push(e=>!!Number.isInteger(e)||new Error("must-be-an-intager"),"int"),this}getType(){return super.getType("number")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.isAnObject=(e=>"object"==typeof e&&!(e instanceof Array)),t.isNotAnObject=(e=>!t.isAnObject(e));t.default=class extends n.default{constructor(e){super(),this.isStrict=!1,this.props=e,this.push(e=>!t.isNotAnObject(e)||new Error("must-be-an-object")),e&&Object.entries(e).forEach(([e,t])=>{this.push(r=>t.test(r[e]))}),this.push(t=>{if(this.isStrict){const r=Object.keys(t),n=Object.keys(e);if(r.some(e=>!n.some(t=>t==e)))return new Error("dirty-object")}return!0})}strict(){return this.isStrict=!0,this}getType(){return super.getType("object")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);function s(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}t.isAString=(e=>"string"==typeof e),t.isNotAString=(e=>!t.isAString(e));t.default=class extends n.default{constructor(){super(),this.push(e=>!t.isNotAString(e)||new Error("must-be-a-string"))}range(e,t){return this.min(e),this.max(t),this}min(e){return this.push(t=>!(s(t).length<e)||new Error("invalid-range"),"min"),this}max(e){return this.push(t=>!(s(t).length>e)||new Error("invalid-range"),"max"),this}length(e){return this.push(t=>s(t).length===e||new Error("invalid-length"),"length"),this}or(e){return"string"==typeof e&&(e=e.split("|")),this.push(t=>!!e.some(e=>e===t)||new Error("not-match-pattern"),"or"),this}notInclude(e){return"string"==typeof e&&(e=[e]),this.push(t=>!e.some(e=>-1!==t.indexOf(e))||new Error("includes-forbidden-string"),"notInclude"),this}match(e){return this.push(t=>!!e.test(t)||new Error("not-match-pattern"),"match"),this}notMatch(e){return this.push(t=>!e.test(t)||new Error("match-pattern"),"notMatch"),this}getType(){return super.getType("string")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class extends n.default{constructor(e,t){super(),this.ctxA=e,this.ctxB=t,this.push(r=>!e.nok(r)||!t.nok(r)||new Error("not match"))}getType(){return super.getType(`(${this.ctxA.getType()} | ${this.ctxB.getType()})`)}}},function(e,t,r){"use strict";e.exports=(e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function o(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=s.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=o(r[0]);n!==r[0]&&(t[r[0]]=n)}r=s.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),u=0;u<i.length;u++){var l=i[u];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),i=r(2),o=function(){return Object(i.parse)(location.search)},u=function(e){var t={},r=[];if(s.a.str.ok(e.replace)?t.replace=[e.replace]:s.a.arr(s.a.str).ok(e.replace)?t.replace=e.replace:e.replace?r.push("値'replace'が間違っているようです。"):t.replace=["ここに文章を入力"],s.a.str.ok(e.text)&&1===t.replace.length)t.text=[[e.text]];else if(s.a.arr(s.a.str).min(t.replace.length).ok(e.text))if(e.text.length===t.replace.length)t.text=[e.text];else if(e.text.length%t.replace.length==0){t.text=[];for(var n=0;n<e.text.length/t.replace.length;n+=1){var i=n*t.replace.length;t.text.push(e.text.slice(i,i+t.replace.length))}}else r.push("値'text'が間違っているようです。textはreplaceで指定した倍数分指定する必要があります。");else r.push("値'text'が間違っているようです。?text=ひとつめ(&text=ふたつめ&text=みっつめ) のように指定しましょう。replaceが複数の場合、その長さの分だけ指定する必要があります。");s.a.str.ok(e.svg)?e.svg.endsWith(".svg")?t.svg=e.svg.slice(0,-4):t.svg=e.svg:r.push("値'svg'が間違っているようです。文字列で指定しましょう。"),e.interval&&s.a.str.ok(e.interval)?t.interval=parseInt(e.interval,10):e.interval||(t.interval=7e3),e.interval&&!t.interval&&r.push("値'interval'が間違っているようです。数値で指定しましょう。"),s.a.str.ok(e.class)?t.class=e.class:e.class&&r.push("値'class'が間違っているようです。");try{t.reverse=l(e.reverse)}catch(e){r.push("値'reverse'が間違っているようです。")}try{t.stretch=l(e.stretch)}catch(e){r.push("値'stretch'が間違っているようです。")}if(r.length>0)throw Error(r.join("\n"));return t};function l(e){if("true"===e)return!0;if("1"===e)return!0;if(""===e)return!0;if(null===e)return!0;if("false"===e)return!1;if("0"===e)return!1;if(e)throw Error("指定された形式ではないようです。")}var a=function(){function e(){this.client=document.getElementById("client");try{this.queries=u(o())}catch(e){this.client.insertAdjacentText("afterbegin",e)}this.insertSvgs()}return e.prototype.insertSvgs=function(){var e=this,t=new Request("./svg/"+this.queries.svg+".svg");return fetch(t).then(function(e){return e.text()}).then(function(t){e.svg=t;for(var r=[],n=0,s=e.queries.replace;n<s.length;n++){var i=s[n];r.push(new RegExp(i,"g"))}for(var o=0,u=e.queries.text;o<u.length;o++){for(var l=u[o],a=t,c=0;c<r.length;c+=1)a=a.replace(r[c],l[c]);e.client.insertAdjacentHTML("beforeend",'<div class="wrapper">'+a+"</div>")}e.subtitles=Array.from(e.client.children);var h="";switch(e.subtitles[0].getElementsByTagName("text").item(0).style.textAnchor){case"start":h="left";break;case"end":h="right";break;case"middle":default:h="center"}for(var f=0,p=e.subtitles;f<p.length;f++){(m=p[f]).style.transformOrigin=h}for(var d=e.client.getBoundingClientRect(),g=0,y=e.subtitles;g<y.length;g++){var m;(m=y[g]).children.item(0).classList.add("show"),e.queries.class&&m.children.item(0).classList.add(e.queries.class);var b=m.getElementsByTagName("g").item(0).getBoundingClientRect(),v=[];console.log(m.getElementsByTagName("g"));var x=d.width/b.width;if(x<1){for(var w=b;w.width>d.width;)w=m.getElementsByTagName("g").item(0).getBoundingClientRect(),x-=.0025,m.style.transform="scaleX("+x+")";v.push("scaleX("+x+")")}else e.queries.stretch&&v.push("scaleX("+x+")");var j=d.height/b.height;if(j<1){for(w=b;w.height>d.height;)w=m.getElementsByTagName("g").item(0).getBoundingClientRect(),j-=.0025,m.style.transform="scaleY("+j+")";v.push("scaleY("+j+")")}else e.queries.stretch&&v.push("scaleY("+j+")");m.style.transform=v.join(" ")}e.subtitles.length>1&&(e.show=e.subtitles.length-1,e.next(),setInterval(e.next.bind(e),e.queries.interval))}).catch(function(t){e.client.insertAdjacentText("afterbegin","SVGの読み込み・挿入に失敗しました。"),e.client.insertAdjacentText("afterbegin",t),console.error(t)})},e.prototype.next=function(){this.show=this.show===this.subtitles.length-1?0:this.show+1,console.log(this.show);for(var e=0;e<this.subtitles.length;e+=1){var t=this.subtitles[e];e===this.show?(t.children.item(0).classList.add("show"),t.style.zIndex=String(1*(this.queries.reverse?-1:1))):(t.children.item(0).classList.remove("show"),t.style.zIndex=String(1*(this.queries.reverse?1:-1)))}},e}();document.addEventListener("DOMContentLoaded",function(){new a})}]);